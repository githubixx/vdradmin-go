# vdradmin-go Configuration Example

server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  max_header_bytes: 1048576  # 1 MB
  tls:
    enabled: false
    cert_file: ""
    key_file: ""

vdr:
  host: "localhost"
  port: 6419  # Use 2001 for older VDR versions
  timeout: 10s
  # Number of DVB cards VDR can access.
  # Used to calculate critical timer overlaps on the Timers page.
  dvb_cards: 1
  # If set, only these channels are shown across the UI.
  # Leave empty to show all channels.
  # Values are VDR channel IDs (as returned by SVDRP LSTC), e.g. "C-1-1-1".
  wanted_channels: []
  # Optional: enable "stream URL" mode on /watch.
  #
  # If set, /watch will embed the given URL into the TV screen and replace
  # occurrences of "{channel}" with the selected VDR channel number (e.g. "1", "2", "3").
  # The URL must point to a stream format your browser can render (e.g. HLS).
  #
  # Example for streamdev-server (serves MPEG-TS, not browser-playable by default!):
  #   stream_url_template: "http://127.0.0.1:3000/{channel}"
  # Replace 127.0.0.1 with your VDR's hostname or IP if remote.
  # Most browsers CANNOT play raw MPEG-TS streams directly; you usually need HLS or MP4/WebM.
  # Use a remuxer (e.g. streamdev externremux or a proxy) to provide browser-compatible formats if needed.
  stream_url_template: ""

  # Recommended: HLS proxy backend URL (requires ffmpeg installed).
  # If set, vdradmin-go transcodes streamdev output to HLS for browser playback.
  # Use {channel} as placeholder for channel number.
  #
  # Example:
  #   streamdev_backend_url: "http://127.0.0.1:3000/{channel}"
  #
  # When enabled, /watch automatically uses /watch/stream/{channel}/index.m3u8 internally.
  streamdev_backend_url: ""
  video_dir: "/var/lib/video.00"
  config_dir: "/etc/vdr"
  reconnect_delay: 5s

auth:
  enabled: true
  admin_user: "admin"
  admin_pass: "changeme"
  guest_enabled: false
  guest_user: "guest"
  guest_pass: "guest"
  # Local networks that bypass authentication (CIDR notation)
  local_nets:
    - "192.168.1.0/24"
    - "127.0.0.1/32"

cache:
  epg_expiry: 60m
  # Set to 0s to disable caching and always reflect current recording list.
  recording_expiry: 0s

timer:
  default_priority: 50
  default_lifetime: 99
  default_margin_start: 2   # minutes
  default_margin_end: 10    # minutes

epg:
  # Saved EPG searches executed client-side against SVDRP EPG data.
  # These do not require vdr-plugin-epgsearch.
  searches: []

ui:
  # Default theme: system (auto), light, or dark
  theme: system
  # Which page to show after login and when clicking the top-left "VDRAdmin-go" brand.
  # Allowed values: /, /timers, /now, /recordings, /channels, /playing, /search, /epgsearch, /configurations
  login_page: /timers

archive:
  # Root directory where archived recordings should be stored, e.g. "/vdr/36".
  # Movies will go to <base_dir>/movies-hd/<movie_slug>
  # Series will go to <base_dir>/serien-hd/<series_slug>/<episode_slug>
  base_dir: /vdr/36

  # Optional: override destination profiles.
  # If omitted, vdradmin-go derives two default profiles from base_dir:
  # - movies-hd (movie)  -> /vdr/36/movies-hd
  # - series-hd (series) -> /vdr/36/serien-hd
  # Add more profiles to support additional archive directories.
  profiles:
    - id: movies-hd
      name: Movies (movies-hd)
      kind: movie
      base_dir: /vdr/36/movies-hd
    - id: series-hd
      name: Series (serien-hd)
      kind: series
      base_dir: /vdr/36/serien-hd

  # Extra arguments passed to ffmpeg when archiving.
  # Do NOT include input (-i) or output file path.
  ffmpeg_args: >-
    -vaapi_device /dev/dri/renderD128
    -vf format=nv12,hwupload
    -map 0:0 -c:v hevc_vaapi -rc_mode CQP -global_quality 23 -profile:v main
    -map 0:a -c:a copy
